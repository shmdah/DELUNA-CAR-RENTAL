<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>DELUNA LUXURY CAR | Premium Rentals</title>

    <style>
        /* ============ RESET & BASE ============ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: #0b0b0b;
            color: #f5f5f5;
            line-height: 1.6;
            overflow-x: hidden;
            font-size: 16px;
        }

        /* ============ LOADER ============ */
        #loader {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: #000;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            transition: opacity 0.3s;
        }

        .loader-ring {
            width: 50px; height: 50px;
            border: 3px solid #222;
            border-top: 3px solid #25d366;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin { to { transform: rotate(360deg); } }

        /* ============ HEADER & NAV ============ */
        header {
            position: fixed;
            top: 0; left: 0; right: 0;
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            padding: 15px 5%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 1000;
            border-bottom: 1px solid #222;
        }

        .logo {
            font-size: 20px;
            font-weight: 800;
            letter-spacing: 1px;
            color: #25d366;
            cursor: pointer;
        }

        /* Desktop Nav */
        .desktop-nav {
            display: none;
            gap: 30px;
        }

        .desktop-nav a {
            color: #fff;
            text-decoration: none;
            font-weight: 600;
            font-size: 14px;
            transition: 0.3s;
            cursor: pointer;
        }

        .desktop-nav a:hover { color: #25d366; }

        .header-tools {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .mobile-menu-btn {
            background: none; border: none; color: #fff;
            font-size: 24px; cursor: pointer; display: block;
        }

        /* Mobile Sidebar */
        nav#sidebar {
            position: fixed;
            top: 0; left: -100%;
            width: 280px; height: 100vh;
            background: #111;
            display: flex;
            flex-direction: column;
            padding: 30px 20px;
            gap: 15px;
            transition: left 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 2000;
            border-right: 1px solid #222;
        }

        nav#sidebar.active { left: 0; }

        nav#sidebar a {
            color: #fff; text-decoration: none;
            font-size: 18px; font-weight: 600;
            padding: 15px 0; border-bottom: 1px solid #222;
        }

        /* ============ CART ICON ============ */
        .cart-icon {
            position: relative; cursor: pointer;
            padding: 8px; border-radius: 50%;
            background: rgba(37, 211, 102, 0.1);
            display: flex; align-items: center; justify-content: center;
            width: 45px; height: 45px;
        }

        .cart-count {
            position: absolute; top: -5px; right: -5px;
            background: #25d366; color: #000;
            font-size: 12px; font-weight: 700;
            padding: 2px 7px; border-radius: 10px;
        }

        /* ============ SECTIONS ============ */
        section {
            display: none;
            min-height: 100vh;
            padding: 100px 5% 60px;
        }

        section.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        /* Hero PC vs Mobile */
        .hero {
            position: relative;
            display: flex; align-items: center; justify-content: center;
            text-align: center; overflow: hidden;
            padding: 0;
        }

        .hero video {
            position: absolute; top: 50%; left: 50%;
            min-width: 100%; min-height: 100%;
            transform: translate(-50%, -50%);
            object-fit: cover; z-index: -1;
        }

        .hero::after {
            content: ''; position: absolute; inset: 0;
            background: rgba(0,0,0,0.65); z-index: 0;
        }

        .hero-content { position: relative; z-index: 1; padding: 20px; }

        .hero h1 { font-size: clamp(32px, 5vw, 60px); margin-bottom: 20px; line-height: 1.1; }

        /* ============ FLEET GRID ============ */
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 30px;
            margin-top: 40px;
            max-width: 1200px;
            margin-left: auto;
            margin-right: auto;
        }

        .card {
            background: #161616;
            border-radius: 20px;
            overflow: hidden;
            border: 1px solid #222;
            transition: transform 0.3s ease;
        }

        .card:hover { transform: translateY(-5px); border-color: #25d366; }

        .slider { position: relative; height: 240px; background: #000; }
        .slider img { width: 100%; height: 100%; object-fit: cover; display: none; }
        .slider img.active { display: block; }

        .slider-btn {
            position: absolute; top: 50%; transform: translateY(-50%);
            background: rgba(0,0,0,0.6); color: #fff; border: none;
            width: 40px; height: 40px; border-radius: 50%;
            cursor: pointer; z-index: 2; font-size: 20px;
        }
        .next { right: 10px; }
        .prev { left: 10px; }

        .card-content { padding: 25px; }
        .price { color: #25d366; font-size: 22px; font-weight: 700; margin-bottom: 15px; }

        .rental-dates {
            background: #1f1f1f; padding: 15px;
            border-radius: 12px; margin-bottom: 20px;
        }

        .date-row { display: flex; gap: 10px; margin-bottom: 10px; }
        .date-input { flex: 1; }
        .date-input label { display: block; font-size: 11px; color: #888; margin-bottom: 5px; text-transform: uppercase; }
        .date-input input {
            width: 100%; padding: 12px; background: #0b0b0b;
            border: 1px solid #333; color: #fff; border-radius: 8px; font-size: 13px;
        }

        /* ============ BUTTONS ============ */
        .btn {
            display: block; width: 100%; padding: 15px;
            background: #25d366; color: #000;
            text-decoration: none; font-weight: 700;
            border-radius: 10px; border: none;
            text-align: center; cursor: pointer; font-size: 16px;
        }

        /* ============ CART DRAWER ============ */
        #cart {
            position: fixed; top: 0; right: -100%;
            width: 100%; max-width: 450px; height: 100vh;
            background: #0f0f0f; z-index: 3000;
            transition: 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex; flex-direction: column;
            box-shadow: -10px 0 30px rgba(0,0,0,0.5);
        }

        #cart.active { right: 0; }

        .cart-header {
            padding: 25px; background: #161616;
            display: flex; justify-content: space-between; align-items: center;
            border-bottom: 1px solid #222;
        }

        .cart-body { flex: 1; overflow-y: auto; padding: 25px; padding-bottom: 150px; }

        .cart-item {
            background: #1a1a1a; padding: 20px;
            border-radius: 15px; margin-bottom: 15px;
            border-left: 5px solid #25d366;
        }

        .cart-footer {
            position: absolute; bottom: 0; left: 0; right: 0;
            background: #161616; padding: 25px;
            border-top: 1px solid #222;
            padding-bottom: max(25px, env(safe-area-inset-bottom));
        }

        .summary-row { display: flex; justify-content: space-between; margin-bottom: 12px; }
        .total-row { font-size: 20px; font-weight: 800; color: #25d366; margin-top: 10px; border-top: 1px solid #333; padding-top: 10px; }

        /* ============ ABOUT ============ */
        .about-wrap { max-width: 900px; margin: 0 auto; }
        .ceo-card {
            background: #161616; padding: 40px 20px;
            border-radius: 25px; text-align: center; border: 1px solid #222;
        }
        .ceo-img {
            width: 150px; height: 150px; border-radius: 50%;
            border: 4px solid #25d366; margin-bottom: 20px; object-fit: cover;
        }

        /* ============ RESPONSIVE BREAKPOINTS ============ */
        @media (min-width: 768px) {
            .desktop-nav { display: flex; }
            .mobile-menu-btn { display: none; }
            header { padding: 20px 8%; }
            section { padding: 120px 8% 60px; }
        }

        /* Utility */
        .notification {
            position: fixed; top: 90px; left: 50%; transform: translateX(-50%) translateY(-200%);
            background: #25d366; color: #000; padding: 15px 30px;
            border-radius: 50px; font-weight: 700; z-index: 4000; transition: 0.4s;
        }
        .notification.show { transform: translateX(-50%) translateY(0); }
        .overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.85); display: none; z-index: 1500; backdrop-filter: blur(4px); }
        .overlay.active { display: block; }
    </style>
</head>

<body>

    <div id="loader"><div class="loader-ring"></div></div>
    <div id="notification" class="notification"></div>
    <div class="overlay" id="overlay" onclick="closeAll()"></div>

    <header>
        <div class="logo" onclick="showPage('home')">DELUNA LUXURY</div>
        
        <div class="desktop-nav">
            <a onclick="showPage('home')">Home</a>
            <a onclick="showPage('fleet')">Fleet</a>
            <a onclick="showPage('about')">About</a>
        </div>

        <div class="header-tools">
            <div class="cart-icon" onclick="toggleCart()">
                ðŸ›’ <span id="count" class="cart-count">0</span>
            </div>
            <button class="mobile-menu-btn" onclick="toggleMenu()">â˜°</button>
        </div>

        <nav id="sidebar">
            <button style="background:none; border:none; color:#fff; font-size:35px; align-self: flex-end;" onclick="toggleMenu()">&times;</button>
            <a onclick="showPage('home')">Home</a>
            <a onclick="showPage('fleet')">Our Fleet</a>
            <a onclick="showPage('about')">About Us</a>
        </nav>
    </header>

    <section id="home" class="hero active">
        <video autoplay muted loop playsinline>
            <source src="images/carbackground.mp4" type="video/mp4">
        </video>
        <div class="hero-content">
            <h1>Elegance In Every Mile</h1>
            <p style="margin-bottom: 40px; opacity: 0.8; font-size: 18px;">Kenya's premier luxury car rental service.</p>
            <div style="max-width: 300px; margin: 0 auto;">
                <button class="btn" onclick="showPage('fleet')">Explore Fleet</button>
            </div>
        </div>
    </section>

    <section id="fleet">
        <div style="text-align: center; margin-bottom: 40px;">
            <h2 style="font-size: 36px; color: #25d366;">Our Premium Fleet</h2>
            <p style="opacity: 0.6;">Select a vehicle and rental period to proceed.</p>
        </div>

        <div class="grid">
            
            <div class="card" id="car-prado">
                <div class="slider">
                    <img src="images/PRADO1 (1).jpeg" class="active">
                    <img src="images/PRADO1 (2).jpeg">
                    <img src="images/PRADO1 (3).jpeg">
                    <button class="slider-btn prev" onclick="moveSlide('car-prado', -1)">â€¹</button>
                    <button class="slider-btn next" onclick="moveSlide('car-prado', 1)">â€º</button>
                </div>
                <div class="card-content">
                    <h3>Toyota Prado TX</h3>
                    <div class="price">KES 20,000 / day</div>
                    <div class="rental-dates">
                        <div class="date-row">
                            <div class="date-input">
                                <label>Pick-up</label>
                                <input type="date" class="pickup" onchange="calcCard('car-prado', 20000)">
                            </div>
                            <div class="date-input">
                                <label>Return</label>
                                <input type="date" class="return" onchange="calcCard('car-prado', 20000)">
                            </div>
                        </div>
                        <div class="calc-res" style="font-size: 13px; color: #25d366; font-weight: 600;">Select dates</div>
                    </div>
                    <button class="btn" onclick="addItem('Toyota Prado TX', 20000, 'car-prado')">Add to Cart</button>
                </div>
            </div>

            <div class="card" id="car-gwagon">
                <div class="slider">
                    <img src="images/GWAGON 1 (1).jpeg" class="active">
                    <img src="images/GWAGON 1 (2).jpeg">
                    <img src="images/GWAGON 1 (3).jpeg">
                    <button class="slider-btn prev" onclick="moveSlide('car-gwagon', -1)">â€¹</button>
                    <button class="slider-btn next" onclick="moveSlide('car-gwagon', 1)">â€º</button>
                </div>
                <div class="card-content">
                    <h3>Mercedes G-Wagon</h3>
                    <div class="price">KES 40,000 / day</div>
                    <div class="rental-dates">
                        <div class="date-row">
                            <div class="date-input">
                                <label>Pick-up</label>
                                <input type="date" class="pickup" onchange="calcCard('car-gwagon', 40000)">
                            </div>
                            <div class="date-input">
                                <label>Return</label>
                                <input type="date" class="return" onchange="calcCard('car-gwagon', 40000)">
                            </div>
                        </div>
                        <div class="calc-res" style="font-size: 13px; color: #25d366; font-weight: 600;">Select dates</div>
                    </div>
                    <button class="btn" onclick="addItem('Mercedes G-Wagon', 40000, 'car-gwagon')">Add to Cart</button>
                </div>
            </div>

            <div class="card" id="car-audi">
                <div class="slider">
                    <img src="images/Audi 1 (1).jpg" class="active">
                    <img src="images/Audi 1 (2).jpg">
                    <button class="slider-btn prev" onclick="moveSlide('car-audi', -1)">â€¹</button>
                    <button class="slider-btn next" onclick="moveSlide('car-audi', 1)">â€º</button>
                </div>
                <div class="card-content">
                    <h3>Audi A4 Premium</h3>
                    <div class="price">KES 12,000 / day</div>
                    <div class="rental-dates">
                        <div class="date-row">
                            <div class="date-input">
                                <label>Pick-up</label>
                                <input type="date" class="pickup" onchange="calcCard('car-audi', 12000)">
                            </div>
                            <div class="date-input">
                                <label>Return</label>
                                <input type="date" class="return" onchange="calcCard('car-audi', 12000)">
                            </div>
                        </div>
                        <div class="calc-res" style="font-size: 13px; color: #25d366; font-weight: 600;">Select dates</div>
                    </div>
                    <button class="btn" onclick="addItem('Audi A4 Premium', 12000, 'car-audi')">Add to Cart</button>
                </div>
            </div>

        </div>
    </section>

    <section id="about">
        <div class="about-wrap">
            <div class="ceo-card">
                <img src="images/CEO.jpg" class="ceo-img" alt="CEO">
                <h2 style="color: #25d366; margin-bottom: 15px;">A Message from our Founder</h2>
                <p style="font-style: italic; margin-bottom: 25px; line-height: 1.8; opacity: 0.9;">
                    "Luxury is not just about the car you drive, but the service you receive. At DELUNA, we ensure every journey is seamless, safe, and sophisticated. We look forward to being part of your story."
                </p>
                <div style="font-weight: 800; letter-spacing: 1px; color: #fff;">DELUNA CEO</div>
                <p style="font-size: 13px; color: #25d366; margin-top: 5px;">LOCATION: Lumumba Drive, Thika Road</p>
            </div>
        </div>
    </section>

    <div id="cart">
        <div class="cart-header">
            <h3>Your Booking Details</h3>
            <button style="background:none; border:none; color:#fff; font-size:30px; cursor:pointer;" onclick="toggleCart()">&times;</button>
        </div>
        <div class="cart-body" id="cart-items">
            </div>
        <div class="cart-footer">
            <div class="summary-row">
                <span>Subtotal:</span>
                <span id="sub-val">KES 0</span>
            </div>
            <div class="summary-row">
                <span>Insurance (5%):</span>
                <span id="ins-val">KES 0</span>
            </div>
            <div class="summary-row total-row">
                <span>Total Amount:</span>
                <span id="total-val">KES 0</span>
            </div>
            <button class="btn" onclick="sendWhatsApp()">Order via WhatsApp</button>
        </div>
    </div>

    <script>
        let cart = [];

        // UI Toggle Functions
        function toggleMenu() {
            document.getElementById('sidebar').classList.toggle('active');
            document.getElementById('overlay').classList.toggle('active');
        }

        function toggleCart() {
            document.getElementById('cart').classList.toggle('active');
            document.getElementById('overlay').classList.toggle('active');
        }

        function closeAll() {
            document.getElementById('sidebar').classList.remove('active');
            document.getElementById('cart').classList.remove('active');
            document.getElementById('overlay').classList.remove('active');
        }

        function showPage(id) {
            document.querySelectorAll('section').forEach(s => s.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            closeAll();
            window.scrollTo({top: 0, behavior: 'smooth'});
        }

        // Image Slider Logic
        function moveSlide(cardId, dir) {
            const imgs = document.querySelectorAll(`#${cardId} .slider img`);
            let active = Array.from(imgs).findIndex(i => i.classList.contains('active'));
            imgs[active].classList.remove('active');
            let next = (active + dir + imgs.length) % imgs.length;
            imgs[next].classList.add('active');
        }

        // Calculate Price based on dates
        function calcCard(id, rate) {
            const card = document.getElementById(id);
            const d1 = card.querySelector('.pickup').value;
            const d2 = card.querySelector('.return').value;
            const res = card.querySelector('.calc-res');

            if(d1 && d2) {
                const date1 = new Date(d1);
                const date2 = new Date(d2);
                const timeDiff = date2.getTime() - date1.getTime();
                const days = Math.ceil(timeDiff / (1000 * 3600 * 24));

                if(days > 0) {
                    res.innerText = `${days} Days: KES ${(days * rate).toLocaleString()}`;
                    return { days, total: days * rate, d1, d2 };
                } else {
                    res.innerText = "Return date must be after pick-up";
                    return null;
                }
            }
            return null;
        }

        // Cart Actions
        function addItem(name, rate, id) {
            const data = calcCard(id, rate);
            if(!data) {
                notify("Please select valid dates first");
                return;
            }

            cart.push({ name, ...data });
            updateCartUI();
            notify(`âœ“ ${name} added to cart`);
        }

        function updateCartUI() {
            const container = document.getElementById('cart-items');
            document.getElementById('count').innerText = cart.length;
            
            if(cart.length === 0) {
                container.innerHTML = '<div style="text-align:center; margin-top:50px; opacity:0.5;"><p>ðŸ›’ Your cart is empty</p></div>';
            } else {
                container.innerHTML = cart.map((item, i) => `
                    <div class="cart-item">
                        <div style="display:flex; justify-content:space-between; align-items:flex-start;">
                            <strong>${item.name}</strong>
                            <button onclick="removeItem(${i})" style="background:none; border:none; color:#ff4444; font-size:18px; cursor:pointer;">&times;</button>
                        </div>
                        <div style="font-size:12px; margin: 8px 0; opacity:0.7;">
                            ðŸ“… ${item.d1} to ${item.d2} (${item.days} days)
                        </div>
                        <div style="color:#25d366; font-weight:bold;">KES ${item.total.toLocaleString()}</div>
                    </div>
                `).join('');
            }

            let sub = cart.reduce((acc, curr) => acc + curr.total, 0);
            let ins = Math.round(sub * 0.05);
            document.getElementById('sub-val').innerText = `KES ${sub.toLocaleString()}`;
            document.getElementById('ins-val').innerText = `KES ${ins.toLocaleString()}`;
            document.getElementById('total-val').innerText = `KES ${(sub + ins).toLocaleString()}`;
        }

        function removeItem(i) {
            cart.splice(i, 1);
            updateCartUI();
        }

        function notify(msg) {
            const n = document.getElementById('notification');
            n.innerText = msg;
            n.classList.add('show');
            setTimeout(() => n.classList.remove('show'), 2500);
        }

        // Final Checkout via WhatsApp
        function sendWhatsApp() {
            if(cart.length === 0) {
                notify("Your cart is empty!");
                return;
            }

            let phoneNumber = "254712345678"; // Replace with your actual WhatsApp number
            let message = "Hello DELUNA LUXURY! I'd like to book the following:%0A%0A";
            
            cart.forEach((item, i) => {
                message += `*${i+1}. ${item.name}*%0A`;
                message += `Dates: ${item.d1} to ${item.d2}%0A`;
                message += `Duration: ${item.days} days%0A`;
                message += `Cost: KES ${item.total.toLocaleString()}%0A%0A`;
            });

            let total = document.getElementById('total-val').innerText;
            message += `*Total Amount (Inc. Insurance): ${total}*`;

            window.open(`https://wa.me/${phoneNumber}?text=${message}`, '_blank');
        }

        // Initialize Page
        window.onload = () => {
            // Remove Loader
            setTimeout(() => {
                document.getElementById('loader').style.opacity = '0';
                setTimeout(() => document.getElementById('loader').style.display = 'none', 300);
            }, 1000);

            // Set Min Date for all inputs
            const today = new Date().toISOString().split('T')[0];
            document.querySelectorAll('input[type="date"]').forEach(input => {
                input.min = today;
            });
        };
    </script>
</body>
</html>
