<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>DELUNA LUXURY CAR RENTALS</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* MOBILE-FIRST CSS - SIMPLIFIED */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        html, body {
            width: 100%;
            height: 100%;
            overflow-x: hidden;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }

        body {
            background: #000;
            color: #fff;
            line-height: 1.4;
        }

        /* SAFE AREAS FOR MOBILE */
        @supports (padding: max(0px)) {
            body, .navbar {
                padding-left: max(0px, env(safe-area-inset-left));
                padding-right: max(0px, env(safe-area-inset-right));
            }
        }

        /* PAGE SYSTEM */
        .page {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            background: #000;
        }

        .page.active {
            display: block;
        }

        /* NAVBAR */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background: rgba(0, 0, 0, 0.95);
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 1000;
            border-bottom: 1px solid #333;
            backdrop-filter: blur(10px);
            height: 60px;
        }

        .logo {
            color: #fff;
            font-size: 24px;
            font-weight: 900;
            font-style: italic;
            text-decoration: none;
        }

        /* SIMPLE MENU TOGGLE */
        .menu-toggle {
            width: 30px;
            height: 24px;
            background: none;
            border: none;
            position: relative;
            cursor: pointer;
        }

        .menu-toggle span {
            display: block;
            width: 100%;
            height: 3px;
            background: #fff;
            margin: 5px 0;
            transition: 0.3s;
        }

        /* MOBILE MENU */
        .mobile-menu {
            position: fixed;
            top: 60px;
            left: 0;
            width: 100%;
            background: #000;
            display: none;
            z-index: 999;
            border-top: 1px solid #333;
        }

        .mobile-menu.active {
            display: block;
        }

        .mobile-menu a {
            display: block;
            padding: 20px;
            color: #fff;
            text-decoration: none;
            border-bottom: 1px solid #222;
            font-size: 18px;
        }

        .mobile-menu a.active {
            color: #ff6b1a;
            border-left: 4px solid #ff6b1a;
        }

        /* HOME PAGE WITH BACKGROUND */
        #home-page {
            position: relative;
            min-height: 100vh;
            background: #000;
        }

        .hero {
            position: relative;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 20px;
            overflow: hidden;
        }

        /* VIDEO BACKGROUND */
        .video-background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }

        .video-background video {
            width: 100%;
            height: 100%;
            object-fit: cover;
            filter: brightness(0.6);
        }

        .video-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, rgba(0,0,0,0.9) 0%, rgba(0,0,0,0.7) 50%, rgba(0,0,0,0.9) 100%);
            z-index: 2;
        }

        /* FALLBACK IMAGE BACKGROUND */
        .image-background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(rgba(0,0,0,0.8), rgba(0,0,0,0.9)), 
                        url('https://images.unsplash.com/photo-1503376780353-7e6692767b70?ixlib=rb-4.0.3&auto=format&fit=crop&w=2070&q=80') 
                        center/cover no-repeat;
            z-index: 1;
        }

        .hero-content {
            position: relative;
            z-index: 3;
            max-width: 500px;
            padding-top: 60px;
        }

        .hero h1 {
            font-size: 48px;
            font-weight: 900;
            font-style: italic;
            margin-bottom: 10px;
            color: #fff;
            text-shadow: 0 2px 10px rgba(0,0,0,0.8);
        }

        .hero p {
            font-size: 18px;
            color: #fff;
            margin-bottom: 30px;
            text-shadow: 0 2px 5px rgba(0,0,0,0.8);
        }

        /* BUTTONS */
        .btn {
            display: inline-block;
            padding: 16px 32px;
            background: #ff6b1a;
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-weight: bold;
            font-size: 18px;
            border: none;
            cursor: pointer;
            transition: all 0.3s;
            width: 100%;
            max-width: 300px;
            margin: 10px auto;
        }

        .btn:hover {
            background: #ff8533;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 107, 26, 0.3);
        }

        .btn-back {
            position: fixed;
            top: 70px;
            left: 15px;
            z-index: 100;
            background: rgba(0,0,0,0.8);
            color: white;
            border: 2px solid white;
            padding: 10px 15px;
            border-radius: 5px;
            font-size: 14px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        /* FLEET PAGE */
        #fleet-page {
            padding-top: 80px;
            padding-bottom: 80px;
            background: #111;
        }

        .section-title {
            text-align: center;
            padding: 20px;
            margin-bottom: 20px;
        }

        .section-title h2 {
            font-size: 32px;
            margin-bottom: 10px;
            color: #fff;
        }

        .section-title p {
            color: #888;
        }

        /* CATEGORY FILTERS */
        .category-filters {
            display: flex;
            justify-content: center;
            gap: 10px;
            padding: 0 20px 20px;
            flex-wrap: wrap;
        }

        .category-btn {
            padding: 10px 20px;
            background: transparent;
            border: 2px solid #ff6b1a;
            color: #ff6b1a;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            font-size: 14px;
            transition: all 0.3s;
        }

        .category-btn.active {
            background: #ff6b1a;
            color: #000;
        }

        .category-btn:hover:not(.active) {
            background: rgba(255, 107, 26, 0.1);
        }

        /* CAR CARDS - SIMPLIFIED */
        .cars-grid {
            padding: 0 20px;
        }

        .car-card {
            background: #1a1a1a;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 20px;
            border: 1px solid #333;
            transition: all 0.3s;
        }

        .car-card:hover {
            transform: translateY(-5px);
            border-color: #ff6b1a;
            box-shadow: 0 10px 20px rgba(0,0,0,0.3);
        }

        .car-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }

        .car-info {
            padding: 20px;
        }

        .car-title {
            font-size: 22px;
            margin-bottom: 10px;
            color: #fff;
        }

        .car-price {
            font-size: 24px;
            color: #ff6b1a;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .car-features {
            list-style: none;
            margin-bottom: 20px;
        }

        .car-features li {
            margin-bottom: 5px;
            color: #ccc;
            font-size: 14px;
        }

        .car-features i {
            color: #ff6b1a;
            margin-right: 8px;
        }

        /* BOOKING PAGE */
        #booking-page {
            padding-top: 80px;
            padding-bottom: 40px;
            background: #111;
        }

        .booking-container {
            max-width: 500px;
            margin: 0 auto;
            padding: 20px;
        }

        .selected-car {
            background: rgba(255, 107, 26, 0.1);
            border-left: 4px solid #ff6b1a;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }

        .selected-car h3 {
            color: #ff6b1a;
            margin-bottom: 5px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #fff;
            font-weight: 500;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 15px;
            background: #000;
            border: 1px solid #333;
            border-radius: 5px;
            color: #fff;
            font-size: 16px;
        }

        /* ENHANCED PRICE CALCULATOR */
        .price-calculator {
            background: rgba(255, 107, 26, 0.1);
            padding: 20px;
            border-radius: 5px;
            margin: 20px 0;
            border-left: 4px solid #ff6b1a;
        }

        .price-calculator h3 {
            color: #ff6b1a;
            margin-bottom: 15px;
            text-align: center;
        }

        .price-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .price-row.total {
            border-bottom: none;
            font-size: 20px;
            font-weight: bold;
            color: #ff6b1a;
            margin-top: 10px;
            padding-top: 10px;
            border-top: 2px solid rgba(255,255,255,0.1);
        }

        /* CURRENCY CONVERTER */
        .currency-converter {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 5px;
            margin-top: 15px;
            border: 1px solid #333;
        }

        .currency-converter h4 {
            margin-bottom: 10px;
            color: #fff;
            text-align: center;
        }

        .currency-options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 10px;
        }

        .currency-option {
            background: #1a1a1a;
            padding: 10px;
            border-radius: 5px;
            text-align: center;
            cursor: pointer;
            border: 1px solid #333;
            transition: all 0.3s;
        }

        .currency-option.active {
            background: rgba(255, 107, 26, 0.2);
            border-color: #ff6b1a;
            color: #ff6b1a;
        }

        .currency-option:hover {
            border-color: #ff6b1a;
        }

        .currency-display {
            font-size: 16px;
            color: #fff;
            text-align: center;
            margin-top: 10px;
            padding: 10px;
            background: rgba(0,0,0,0.5);
            border-radius: 5px;
        }

        /* CONTACT PAGE */
        #contact-page {
            padding-top: 80px;
            padding-bottom: 40px;
            background: #000;
        }

        .contact-container {
            max-width: 500px;
            margin: 0 auto;
            padding: 20px;
        }

        .contact-items {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-top: 30px;
        }

        .contact-item {
            background: #1a1a1a;
            padding: 30px 20px;
            border-radius: 10px;
            text-align: center;
            border: 1px solid #333;
        }

        .contact-icon {
            width: 60px;
            height: 60px;
            background: #ff6b1a;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            font-size: 24px;
        }

        .contact-item h3 {
            margin-bottom: 10px;
            color: #fff;
        }

        .contact-item p {
            color: #ccc;
            line-height: 1.6;
        }

        /* LOADING SPINNER */
        .loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            flex-direction: column;
        }

        .loading.active {
            display: flex;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 4px solid #333;
            border-top: 4px solid #ff6b1a;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* MOBILE-ONLY STYLES */
        @media (min-width: 768px) {
            .mobile-menu {
                display: none !important;
            }
            
            .menu-toggle {
                display: none;
            }
            
            .navbar {
                padding: 20px 40px;
                height: 80px;
            }
            
            .logo {
                font-size: 28px;
            }
            
            .hero h1 {
                font-size: 64px;
            }
            
            .hero p {
                font-size: 22px;
            }
            
            .cars-grid {
                display: grid;
                grid-template-columns: repeat(2, 1fr);
                gap: 20px;
            }
            
            .contact-items {
                flex-direction: row;
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .contact-item {
                flex: 1;
                min-width: 200px;
            }
            
            .btn-back {
                top: 90px;
                left: 30px;
                padding: 12px 20px;
                font-size: 16px;
            }
        }

        /* FIX FOR MOBILE INPUTS */
        input, select, textarea {
            font-size: 16px !important;
        }

        /* PREVENT BLUE HIGHLIGHT ON TAP */
        * {
            -webkit-tap-highlight-color: transparent;
        }

        /* HIDE BACK BUTTON ON HOME */
        #home-page .btn-back {
            display: none;
        }
    </style>
</head>
<body>
    <!-- LOADING SPINNER -->
    <div class="loading" id="loading">
        <div class="spinner"></div>
        <div>Loading...</div>
    </div>

    <!-- NAVBAR -->
    <nav class="navbar">
        <div class="logo">DELUNA</div>
        <button class="menu-toggle" id="menuToggle">
            <span></span>
            <span></span>
            <span></span>
        </button>
    </nav>

    <!-- MOBILE MENU -->
    <div class="mobile-menu" id="mobileMenu">
        <a href="#" class="nav-link active" data-page="home">Home</a>
        <a href="#" class="nav-link" data-page="fleet">Our Fleet</a>
        <a href="#" class="nav-link" data-page="contact">Contact</a>
    </div>

    <!-- PAGES -->
    <!-- HOME PAGE -->
    <div id="home-page" class="page active">
        <button class="btn-back" id="backBtn">
            <i class="fas fa-arrow-left"></i> Back
        </button>
        
        <div class="hero">
            <!-- Video Background -->
            <div class="video-background">
                <video autoplay muted loop playsinline id="heroVideo">
                    <source src="images/carbackground.mp4" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
                <div class="video-overlay"></div>
            </div>
            
            <!-- Fallback Image Background (shows if video fails) -->
            <div class="image-background" id="fallbackBackground"></div>
            
            <div class="hero-content">
                <h1>DELUNA</h1>
                <p>Luxury Car Rentals • Lumumba Drive</p>
                <button class="btn" id="exploreBtn">Explore Models</button>
            </div>
        </div>
    </div>

    <!-- FLEET PAGE -->
    <div id="fleet-page" class="page">
        <button class="btn-back" id="backBtnFleet">
            <i class="fas fa-arrow-left"></i> Back
        </button>
        
        <div class="section-title">
            <h2>Our Luxury Fleet</h2>
            <p>Select from our premium collection</p>
        </div>

        <div class="category-filters">
            <button class="category-btn active" data-category="all">All Cars</button>
            <button class="category-btn" data-category="suv">SUV</button>
            <button class="category-btn" data-category="sedan">Sedan</button>
        </div>

        <div class="cars-grid">
            <!-- Car 1 -->
            <div class="car-card" data-category="suv">
                <img src="images/GWAGON 1 (1).jpeg" alt="Mercedes G-Wagon" class="car-image">
                <div class="car-info">
                    <h3 class="car-title">Mercedes G-Wagon 2023</h3>
                    <div class="car-price">KSH 40,000 / day</div>
                    <ul class="car-features">
                        <li><i class="fas fa-check"></i> Handcrafted AMG Interior</li>
                        <li><i class="fas fa-check"></i> 577 HP Biturbo V8</li>
                        <li><i class="fas fa-check"></i> Triple-Lock Differential</li>
                        <li><i class="fas fa-check"></i> Premium Sound System</li>
                    </ul>
                    <button class="btn select-car" data-car="Mercedes G-Wagon 2023" data-price="40000">Select This Car</button>
                </div>
            </div>

            <!-- Car 2 -->
            <div class="car-card" data-category="suv">
                <img src="images/PRADO1 (1).jpeg" alt="Toyota Prado" class="car-image">
                <div class="car-info">
                    <h3 class="car-title">Toyota Land Cruiser Prado 2023</h3>
                    <div class="car-price">KSH 15,000 / day</div>
                    <ul class="car-features">
                        <li><i class="fas fa-check"></i> 7 Seater Luxury SUV</li>
                        <li><i class="fas fa-check"></i> Full Leather Interior</li>
                        <li><i class="fas fa-check"></i> Advanced Safety Features</li>
                        <li><i class="fas fa-check"></i> Premium Sound System</li>
                    </ul>
                    <button class="btn select-car" data-car="Toyota Land Cruiser Prado 2023" data-price="15000">Select This Car</button>
                </div>
            </div>

            <!-- Car 3 -->
            <div class="car-card" data-category="sedan">
                <img src="images/Audi 1 (1).jpg" alt="Audi A4" class="car-image">
                <div class="car-info">
                    <h3 class="car-title">Audi A4 2018</h3>
                    <div class="car-price">KSH 15,000 / day</div>
                    <ul class="car-features">
                        <li><i class="fas fa-check"></i> Quattro All-Wheel Drive</li>
                        <li><i class="fas fa-check"></i> Virtual Cockpit Display</li>
                        <li><i class="fas fa-check"></i> Premium Plus Package</li>
                        <li><i class="fas fa-check"></i> Apple CarPlay & Android Auto</li>
                    </ul>
                    <button class="btn select-car" data-car="Audi A4 2018" data-price="15000">Select This Car</button>
                </div>
            </div>
        </div>
    </div>

    <!-- BOOKING PAGE -->
    <div id="booking-page" class="page">
        <button class="btn-back" id="backBtnBooking">
            <i class="fas fa-arrow-left"></i> Back
        </button>
        
        <div class="booking-container">
            <div class="section-title">
                <h2>Complete Your Reservation</h2>
                <p>Fill in your details to book</p>
            </div>

            <div class="selected-car" id="selectedCarInfo">
                <h3 id="selectedCarName">Mercedes G-Wagon 2023</h3>
                <p id="selectedCarPrice">KSH 40,000 / day</p>
            </div>

            <form id="bookingForm">
                <div class="form-group">
                    <label for="fullName">Full Name *</label>
                    <input type="text" id="fullName" placeholder="Enter your full name" required>
                </div>

                <div class="form-group">
                    <label for="phone">Phone Number *</label>
                    <input type="tel" id="phone" placeholder="e.g. 0712 345 678" required>
                </div>

                <div class="form-group">
                    <label for="pickupDate">Pickup Date *</label>
                    <input type="date" id="pickupDate" required>
                </div>

                <div class="form-group">
                    <label for="rentalDays">Rental Duration *</label>
                    <select id="rentalDays" required>
                        <option value="1">1 Day</option>
                        <option value="2">2 Days</option>
                        <option value="3">3 Days</option>
                        <option value="4">4 Days</option>
                        <option value="5">5 Days</option>
                        <option value="7">7 Days</option>
                        <option value="14">14 Days</option>
                        <option value="30">30 Days</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="pickupTime">Pickup Time *</label>
                    <select id="pickupTime" required>
                        <option value="08:00">08:00 AM</option>
                        <option value="09:00">09:00 AM</option>
                        <option value="10:00">10:00 AM</option>
                        <option value="11:00">11:00 AM</option>
                        <option value="12:00">12:00 PM</option>
                        <option value="13:00">01:00 PM</option>
                        <option value="14:00">02:00 PM</option>
                        <option value="15:00">03:00 PM</option>
                    </select>
                </div>

                <!-- ENHANCED PRICE CALCULATOR -->
                <div class="price-calculator">
                    <h3>Price Calculator</h3>
                    
                    <div class="price-row">
                        <span>Daily Rate:</span>
                        <span id="dailyRate">KSH 40,000</span>
                    </div>
                    <div class="price-row">
                        <span>Number of Days:</span>
                        <span id="daysCount">1</span>
                    </div>
                    <div class="price-row">
                        <span>Car Rental:</span>
                        <span id="carRental">KSH 40,000</span>
                    </div>
                    <div class="price-row">
                        <span>Insurance:</span>
                        <span id="insurance">KSH 3,000</span>
                    </div>
                    <div class="price-row">
                        <span>Service Fee:</span>
                        <span id="serviceFee">KSH 2,000</span>
                    </div>
                    <div class="price-row total">
                        <span>Total Amount:</span>
                        <span id="totalAmount">KSH 45,000</span>
                    </div>

                    <!-- CURRENCY CONVERTER -->
                    <div class="currency-converter">
                        <h4>Convert to Other Currencies</h4>
                        <div class="currency-options">
                            <div class="currency-option active" data-currency="KES">Kenyan Shilling (KES)</div>
                            <div class="currency-option" data-currency="USD">US Dollar (USD)</div>
                            <div class="currency-option" data-currency="EUR">Euro (EUR)</div>
                            <div class="currency-option" data-currency="GBP">British Pound (GBP)</div>
                        </div>
                        <div class="currency-display" id="currencyDisplay">
                            Total: <strong>KSH 45,000</strong>
                        </div>
                    </div>
                </div>

                <button type="button" class="btn" id="backToFleet">Back to Fleet</button>
                <button type="submit" class="btn" id="confirmBooking">Confirm Booking</button>
            </form>
        </div>
    </div>

    <!-- CONTACT PAGE -->
    <div id="contact-page" class="page">
        <button class="btn-back" id="backBtnContact">
            <i class="fas fa-arrow-left"></i> Back
        </button>
        
        <div class="contact-container">
            <div class="section-title">
                <h2>Contact Us</h2>
                <p>Get in touch with DELUNA</p>
            </div>

            <div class="contact-items">
                <div class="contact-item">
                    <div class="contact-icon">
                        <i class="fas fa-map-marker-alt"></i>
                    </div>
                    <h3>Location</h3>
                    <p>Thika Road / Lumumba Drive<br>Nairobi, Kenya</p>
                </div>

                <div class="contact-item">
                    <div class="contact-icon">
                        <i class="fas fa-phone"></i>
                    </div>
                    <h3>Phone</h3>
                    <p>+254 700 000 000<br>24/7 Service</p>
                </div>

                <div class="contact-item">
                    <div class="contact-icon">
                        <i class="fas fa-clock"></i>
                    </div>
                    <h3>Hours</h3>
                    <p>Monday - Sunday<br>24 Hours</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // SIMPLE MOBILE APP
        document.addEventListener('DOMContentLoaded', function() {
            // ELEMENTS
            const loading = document.getElementById('loading');
            const menuToggle = document.getElementById('menuToggle');
            const mobileMenu = document.getElementById('mobileMenu');
            const navLinks = document.querySelectorAll('.nav-link');
            const pages = document.querySelectorAll('.page');
            const exploreBtn = document.getElementById('exploreBtn');
            const backBtns = document.querySelectorAll('.btn-back');
            const categoryBtns = document.querySelectorAll('.category-btn');
            const carCards = document.querySelectorAll('.car-card');
            const selectCarBtns = document.querySelectorAll('.select-car');
            const backToFleetBtn = document.getElementById('backToFleet');
            const bookingForm = document.getElementById('bookingForm');
            const rentalDays = document.getElementById('rentalDays');
            const heroVideo = document.getElementById('heroVideo');
            const fallbackBackground = document.getElementById('fallbackBackground');
            
            // CURRENCY ELEMENTS
            const currencyOptions = document.querySelectorAll('.currency-option');
            const currencyDisplay = document.getElementById('currencyDisplay');
            
            // EXCHANGE RATES (as of current date - approximate values)
            const exchangeRates = {
                KES: 1,        // Base currency
                USD: 0.0077,   // 1 KES = 0.0077 USD
                EUR: 0.0071,   // 1 KES = 0.0071 EUR
                GBP: 0.0061    // 1 KES = 0.0061 GBP
            };
            
            // CURRENCY SYMBOLS
            const currencySymbols = {
                KES: 'KSH',
                USD: '$',
                EUR: '€',
                GBP: '£'
            };
            
            // SELECTED CAR INFO
            let selectedCar = {
                name: 'Mercedes G-Wagon 2023',
                price: 40000,
                insurance: 3000,
                serviceFee: 2000
            };
            
            // CURRENT CURRENCY
            let currentCurrency = 'KES';
            
            // INITIALIZE DATE INPUT
            function initDateInput() {
                const today = new Date();
                const tomorrow = new Date(today);
                tomorrow.setDate(tomorrow.getDate() + 1);
                
                // Format date as YYYY-MM-DD
                const formatDate = (date) => {
                    return date.toISOString().split('T')[0];
                };
                
                document.getElementById('pickupDate').min = formatDate(tomorrow);
                
                // Set default to 2 days from now
                const defaultDate = new Date(today);
                defaultDate.setDate(defaultDate.getDate() + 2);
                document.getElementById('pickupDate').value = formatDate(defaultDate);
            }
            
            // LOADING FUNCTION
            function showLoading() {
                loading.classList.add('active');
                setTimeout(() => {
                    loading.classList.remove('active');
                }, 800);
            }
            
            // PAGE NAVIGATION
            function goToPage(pageId) {
                showLoading();
                setTimeout(() => {
                    // Hide all pages
                    pages.forEach(page => {
                        page.classList.remove('active');
                    });
                    
                    // Show target page
                    document.getElementById(pageId + '-page').classList.add('active');
                    
                    // Update mobile menu
                    navLinks.forEach(link => {
                        link.classList.remove('active');
                        if (link.dataset.page === pageId) {
                            link.classList.add('active');
                        }
                    });
                    
                    // Close mobile menu
                    mobileMenu.classList.remove('active');
                    menuToggle.classList.remove('active');
                    
                    // Scroll to top
                    window.scrollTo(0, 0);
                    
                    // Update price when going to booking page
                    if (pageId === 'booking') {
                        updatePrice();
                    }
                }, 300);
            }
            
            // BACK FUNCTION
            function goBack() {
                const currentPage = document.querySelector('.page.active').id;
                
                if (currentPage === 'fleet-page') {
                    goToPage('home');
                } else if (currentPage === 'booking-page') {
                    goToPage('fleet');
                } else if (currentPage === 'contact-page') {
                    goToPage('home');
                } else {
                    goToPage('home');
                }
            }
            
            // CAR FILTERING
            function filterCars(category) {
                // Update active button
                categoryBtns.forEach(btn => {
                    btn.classList.remove('active');
                    if (btn.dataset.category === category) {
                        btn.classList.add('active');
                    }
                });
                
                // Show/hide cars
                carCards.forEach(card => {
                    if (category === 'all' || card.dataset.category === category) {
                        card.style.display = 'block';
                    } else {
                        card.style.display = 'none';
                    }
                });
            }
            
            // UPDATE PRICE CALCULATION
            function updatePrice() {
                const days = parseInt(rentalDays.value);
                const dailyRate = selectedCar.price;
                const carRental = dailyRate * days;
                const insurance = selectedCar.insurance * days;
                const serviceFee = selectedCar.serviceFee;
                const totalKES = carRental + insurance + serviceFee;
                
                // Convert to current currency
                const rate = exchangeRates[currentCurrency];
                const symbol = currencySymbols[currentCurrency];
                const totalConverted = totalKES * rate;
                
                // Format numbers with commas
                const formatNumber = (num) => {
                    return num.toLocaleString();
                };
                
                // Update UI in selected currency
                document.getElementById('selectedCarName').textContent = selectedCar.name;
                document.getElementById('selectedCarPrice').textContent = 
                    `${symbol} ${(dailyRate * rate).toLocaleString(undefined, {minimumFractionDigits: 2})} / day`;
                
                document.getElementById('dailyRate').textContent = 
                    `${symbol} ${(dailyRate * rate).toLocaleString(undefined, {minimumFractionDigits: 2})}`;
                
                document.getElementById('daysCount').textContent = days;
                document.getElementById('carRental').textContent = 
                    `${symbol} ${(carRental * rate).toLocaleString(undefined, {minimumFractionDigits: 2})}`;
                
                document.getElementById('insurance').textContent = 
                    `${symbol} ${(insurance * rate).toLocaleString(undefined, {minimumFractionDigits: 2})}`;
                
                document.getElementById('serviceFee').textContent = 
                    `${symbol} ${(serviceFee * rate).toLocaleString(undefined, {minimumFractionDigits: 2})}`;
                
                document.getElementById('totalAmount').textContent = 
                    `${symbol} ${totalConverted.toLocaleString(undefined, {minimumFractionDigits: 2})}`;
                
                // Update currency display
                currencyDisplay.innerHTML = `Total: <strong>${symbol} ${totalConverted.toLocaleString(undefined, {minimumFractionDigits: 2})}</strong>`;
            }
            
            // CONVERT CURRENCY
            function convertCurrency(currency) {
                // Update active currency button
                currencyOptions.forEach(option => {
                    option.classList.remove('active');
                    if (option.dataset.currency === currency) {
                        option.classList.add('active');
                    }
                });
                
                // Update current currency and recalculate
                currentCurrency = currency;
                updatePrice();
            }
            
            // EVENT LISTENERS
            
            // Mobile Menu Toggle
            menuToggle.addEventListener('click', function() {
                mobileMenu.classList.toggle('active');
                this.classList.toggle('active');
            });
            
            // Navigation Links
            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const page = this.dataset.page;
                    goToPage(page);
                });
            });
            
            // Logo click
            document.querySelector('.logo').addEventListener('click', function(e) {
                e.preventDefault();
                goToPage('home');
            });
            
            // Explore Button
            exploreBtn.addEventListener('click', function() {
                goToPage('fleet');
            });
            
            // Back Buttons
            backBtns.forEach(btn => {
                btn.addEventListener('click', goBack);
            });
            
            // Category Filters
            categoryBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    filterCars(this.dataset.category);
                });
            });
            
            // Select Car Buttons
            selectCarBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    selectedCar = {
                        name: this.dataset.car,
                        price: parseInt(this.dataset.price),
                        insurance: 3000, // Fixed insurance per day
                        serviceFee: 2000 // Fixed service fee
                    };
                    updatePrice();
                    goToPage('booking');
                });
            });
            
            // Currency Options
            currencyOptions.forEach(option => {
                option.addEventListener('click', function() {
                    convertCurrency(this.dataset.currency);
                });
            });
            
            // Back to Fleet from Booking
            backToFleetBtn.addEventListener('click', function() {
                goToPage('fleet');
            });
            
            // Update price when days change
            rentalDays.addEventListener('change', updatePrice);
            
            // Form Submission
            bookingForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                // Get form data
                const name = document.getElementById('fullName').value;
                const phone = document.getElementById('phone').value;
                const date = document.getElementById('pickupDate').value;
                const days = document.getElementById('rentalDays').value;
                const time = document.getElementById('pickupTime').value;
                const total = document.getElementById('totalAmount').textContent;
                
                // Basic validation
                if (!name || !phone) {
                    alert('Please fill in all required fields.');
                    return;
                }
                
                // Create WhatsApp message
                const message = `*DELUNA LUXURY CAR RENTALS - BOOKING REQUEST*%0A%0A` +
                               `*Name:* ${name}%0A` +
                               `*Phone:* ${phone}%0A` +
                               `*Car:* ${selectedCar.name}%0A` +
                               `*Pickup Date:* ${date}%0A` +
                               `*Pickup Time:* ${time}%0A` +
                               `*Duration:* ${days} day(s)%0A` +
                               `*Total Amount:* ${total}%0A%0A` +
                               `Please confirm availability.`;
                
                // Open WhatsApp
                window.open(`https://wa.me/254700000000?text=${message}`, '_blank');
                
                // Show confirmation
                alert('Booking request sent! Please check WhatsApp to complete your reservation.');
                
                // Reset and go back to fleet
                bookingForm.reset();
                initDateInput(); // Reset date to default
                updatePrice();
                goToPage('fleet');
            });
            
            // Close menu when clicking outside
            document.addEventListener('click', function(e) {
                if (!menuToggle.contains(e.target) && !mobileMenu.contains(e.target)) {
                    mobileMenu.classList.remove('active');
                    menuToggle.classList.remove('active');
                }
            });
            
            // Handle video error (fallback to image background)
            if (heroVideo) {
                heroVideo.addEventListener('error', function() {
                    console.log('Video failed to load, using fallback image');
                    this.style.display = 'none';
                    fallbackBackground.style.display = 'block';
                });
                
                // Try to play video (required for iOS)
                heroVideo.muted = true;
                heroVideo.playsInline = true;
                
                const playPromise = heroVideo.play();
                if (playPromise !== undefined) {
                    playPromise.catch(error => {
                        console.log('Video autoplay prevented, will play on user interaction');
                        // Play on user interaction
                        const playVideo = () => {
                            heroVideo.play();
                            document.removeEventListener('click', playVideo);
                            document.removeEventListener('touchstart', playVideo);
                        };
                        document.addEventListener('click', playVideo, { once: true });
                        document.addEventListener('touchstart', playVideo, { once: true });
                    });
                }
            }
            
            // Prevent image dragging
            const images = document.querySelectorAll('img');
            images.forEach(img => {
                img.addEventListener('dragstart', function(e) {
                    e.preventDefault();
                });
                
                // Handle image errors
                img.addEventListener('error', function() {
                    console.log(`Image failed to load: ${this.src}`);
                    this.src = 'https://images.unsplash.com/photo-1580273916550-e323be2ae537?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80';
                    this.alt = 'Car Image';
                });
            });
            
            // Handle mobile back button
            window.addEventListener('popstate', function() {
                goBack();
            });
            
            // Fix for iOS 100vh issue
            function fixIOSHeight() {
                const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
                if (isIOS) {
                    const vh = window.innerHeight * 0.01;
                    document.documentElement.style.setProperty('--vh', `${vh}px`);
                    
                    window.addEventListener('resize', function() {
                        const vh = window.innerHeight * 0.01;
                        document.documentElement.style.setProperty('--vh', `${vh}px`);
                    });
                }
            }
            
            // Initialize
            fixIOSHeight();
            initDateInput();
            updatePrice();
            
            // Preload images
            const imageUrls = [
                'images/GWAGON 1 (1).jpeg',
                'images/PRADO1 (1).jpeg',
                'images/Audi 1 (1).jpg',
                'https://images.unsplash.com/photo-1503376780353-7e6692767b70?ixlib=rb-4.0.3&auto=format&fit=crop&w=2070&q=80'
            ];
            
            imageUrls.forEach(url => {
                const img = new Image();
                img.src = url;
            });
        });
    </script>
</body>
</html>
